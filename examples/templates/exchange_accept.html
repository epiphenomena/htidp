{% extends "base.html" %}

{% block title %}Accept Exchange - HTIDP Example Server{% endblock %}

{% block header %}Exchange Contact Information{% endblock %}

{% block content %}
{% if error %}
<div class="error">
    <p>{{ error }}</p>
</div>
<div style="margin-top: 20px;">
    <a href="/ui/exchange"><button>Back to Exchange</button></a>
</div>
{% else %}
{% if unsolicited %}
<div class="warning">
    <p><strong>Notice:</strong> This is an unsolicited connection request.</p>
</div>
{% endif %}

<p>Please fill in your information below to complete the exchange.</p>

<form method="POST" action="/ui/exchange/submit">
    <input type="hidden" name="token" value="{{ token }}">
    
    <label for="your_name">Your Name/Nickname:</label>
    <input type="text" id="your_name" name="your_name" placeholder="Enter your name or nickname" required>
    
    <label for="your_msg">Your Message (optional, max 240 characters):</label>
    <textarea id="your_msg" name="your_msg" placeholder="Add a message to include with your connection request" maxlength="240" rows="3"></textarea>
    
    <label for="perma_url">Your Permanent URL (HTTPS):</label>
    <input type="url" id="perma_url" name="perma_url" placeholder="https://your-server.com/contact" required>
    
    <label for="public_key">Your Public Key:</label>
    <textarea id="public_key" name="public_key" placeholder="Enter your public key" rows="4" required></textarea>
    
    <label for="callback_url">Callback URL (where to send response):</label>
    <input type="url" id="callback_url" name="callback_url" placeholder="https://your-server.com/callback" required>
    
    <button type="submit">Submit Exchange</button>
</form>
{% endif %}
{% endblock %}